#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/stat.h>
#include <dirent.h>
#include <string.h>
#include <errno.h>
#include <fcntl.h>
#include <sys/ioctl.h>

#define CURSOR_UP "\033[1A"
#define CURSOR_DOWN "\033[1B"
#define CURSOR_RIGHT "\033[1C"
#define CURSOR_LEFT "\033[1D"
#define ALT_BUFFER "\033[?1049h\033[H"
#define PRESERVED_SCREEN "\033[?1049l"

int print_selection(int file, struct winsize* window, int start_read){
  FILE* fstream = fdopen(file,"r");
  char buffer[(*window).ws_col];
  char *bufferptr = buffer;
  ssize_t buff_size = sizeof(buffer);
  int read;
  
  read = getline(&bufferptr, &buff_size, fstream);
  
}

int open_screen_buffer(){
  printf(ALT_BUFFER);
}

int open_preserved_screen(){
  printf(PRESERVED_SCREEN);
}

int main(){
  int cursor_row, cursor_col, read_line;

  struct winsize window;
  ioctl(STDOUT_FILENO, TIOCGWINSZ, &window);
  //integers ws_row and ws_col

  int map = open("./map",O_RDONLY);

 
  open_screen_buffer();
  
  print_selection(map, &window, 0);
  

  open_preserved_screen();

  close(map);
}
